# –ó–≤—ñ—Ç –ø–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è–º √Åsbr√∫ Connection Manager –¥–ª—è Wayland/COSMIC
## –î–∞—Ç–∞: 18 —Å–µ—Ä–ø–Ω—è 2025

### ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–Ü –ü–†–û–ë–õ–ï–ú–ò:

#### 1. –ö–µ—à—É–≤–∞–Ω–Ω—è –≤–∏–∫–ª–∏–∫—ñ–≤ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ç–µ–º–∏ (DEBUG spam)
**–ü—Ä–æ–±–ª–µ–º–∞:** –°–æ—Ç–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å "DEBUG: Theme detection - is_dark: 1"
**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:** –î–æ–¥–∞–Ω–æ 5-—Å–µ–∫—É–Ω–¥–Ω–µ –∫–µ—à—É–≤–∞–Ω–Ω—è –≤ `_getSystemThemeTextColor()`
**–§–∞–π–ª:** `lib/PACMain.pm`
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –¢–µ–ø–µ—Ä –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è "DEBUG: Theme detection - is_dark: 1 (cached for 5s)"

#### 2. Wayland —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è embedding
**–ü—Ä–æ–±–ª–µ–º–∞:** Segmentation fault –ø—Ä–∏ —Å–ø—Ä–æ–±—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è GtkSocket –Ω–∞ Wayland
**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:** –î–æ–¥–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏—è–≤–ª–µ–Ω–Ω—è Wayland —ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è embedding
**–§–∞–π–ª:** `lib/PACTerminal.pm` (–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä)
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ "WARN: Wayland detected - embedding disabled for this connection"

#### 3. –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –Ω–µ—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö –∑–º—ñ–Ω–Ω–∏—Ö –≤ asbru_conn
**–ü—Ä–æ–±–ª–µ–º–∞:** "Use of uninitialized value in concatenation" –≤ –ª—ñ–Ω—ñ—è—Ö 1219, 1222
**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:** –î–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –Ω–∞ –Ω–µ—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –∑–º—ñ–Ω–Ω—ñ width, height, xid
**–§–∞–π–ª:** `lib/asbru_conn`
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ –Ω–µ—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è

#### 4. StatusNotifierItem (SNI) —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –¥–ª—è COSMIC
**–ü—Ä–æ–±–ª–µ–º–∞:** –¢—Ä–µ–π —ñ–∫–æ–Ω–∫–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–∞–ª–∞—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ COSMIC DE
**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:** –î–æ–¥–∞–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º–∫—É SNI –∑ fallback –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π —Ç—Ä–µ–π
**–§–∞–π–ª:** `lib/PACTray.pm`
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ "INFO: StatusNotifierItem registered" + tray helper window

### üîÑ –ß–ê–°–¢–ö–û–í–Ü –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø:

#### StatusNotifierItem DBus
**–°—Ç–∞—Ç—É—Å:** –ü–æ—Ç—Ä–µ–±—É—î `Net::DBus` –º–æ–¥—É–ª—å –¥–ª—è –ø–æ–≤–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ
**–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω:** Fallback –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π —Ç—Ä–µ–π –ø—Ä–∞—Ü—é—î
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** `sudo apt install libnet-dbus-perl` –¥–ª—è –ø–æ–≤–Ω–æ—ó SNI –ø—ñ–¥—Ç—Ä–∏–º–∫–∏

#### GTK –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è
**–°—Ç–∞—Ç—É—Å:** –ó–∞–ª–∏—à–∞—é—Ç—å—Å—è –¥–µ—è–∫—ñ `gtk_box_pack` –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è
**–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω:** –ù–µ –∫—Ä–∏—Ç–∏—á–Ω—ñ, –Ω–µ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –ú–æ–∂—É—Ç—å –±—É—Ç–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ –≤ –º–∞–π–±—É—Ç–Ω—ñ—Ö –æ–Ω–æ–≤–ª–µ–Ω–Ω—è—Ö GTK/cosmic

### üìä –¢–ï–°–¢–£–í–ê–ù–ù–Ø:

#### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–∏:
- ‚úÖ –ü—Ä–æ–≥—Ä–∞–º–∞ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –±–µ–∑ –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫
- ‚úÖ Wayland detection –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –¢–µ–º–∞ detection –∫–µ—à—É—î—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –¢—Ä–µ–π —ñ–∫–æ–Ω–∫–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è (–∑ helper window)

#### RDP –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è:
- ‚úÖ Embedding –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –Ω–∞ Wayland
- ‚úÖ –í—ñ–¥—Å—É—Ç–Ω—ñ –Ω–µ—ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –∑–º—ñ–Ω–Ω—ñ –≤ –ª–æ–≥–∞—Ö
- ‚úÖ –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ø–æ–≤–∏–Ω–Ω–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –≤ –∑–æ–≤–Ω—ñ—à–Ω—å–æ–º—É –≤—ñ–∫–Ω—ñ

### üéØ –ü–Ü–î–°–£–ú–û–ö:

**–ü–æ—á–∞—Ç–∫–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏:**
1. ‚ùå –¢–µ–º–Ω–∞ —Ç–µ–º–∞ –Ω–µ –ø—Ä–∞—Ü—é–≤–∞–ª–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. ‚ùå Segmentation fault –Ω–∞ Wayland
3. ‚ùå –°–ø–∞–º theme detection –≤ –ª–æ–≥–∞—Ö  
4. ‚ùå –¢—Ä–µ–π —ñ–∫–æ–Ω–∫–∞ –ø–æ–∑–∞ –º–µ–∂–∞–º–∏ —Ç—Ä–µ—é
5. ‚ùå FreeRDP —ñ–≥–Ω–æ—Ä—É–≤–∞–≤ —Ä–æ–∑–¥—ñ–ª—å–Ω—ñ—Å—Ç—å –≤—ñ–∫–Ω–∞

**–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω:**
1. ‚úÖ –¢–µ–º–Ω–∞ —Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –∑ –∫–µ—à—É–≤–∞–Ω–Ω—è–º
2. ‚úÖ Segmentation fault –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ Wayland detection
3. ‚úÖ Theme detection spam –ø—Ä–∏–ø–∏–Ω–µ–Ω–æ  
4. ‚úÖ –¢—Ä–µ–π —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î –∑ SNI/fallback
5. ‚úÖ RDP –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ –¥–ª—è Wayland

**–°–∏—Å—Ç–µ–º–∞:** PopOS 24.04 (COSMIC DE, Wayland)
**–°—Ç–∞—Ç—É—Å:** –í–ò–†–Ü–®–ï–ù–û - –≤—Å—ñ –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ
